@page "/createcomp"

@using SkyVoteTime.Client.API;


@inject TheMovieDBApi movieApi

<h1 class="title" style="text-align:center; margin-top:100px">Create Competition</h1>



<div class="container rounded-3 fundo justify-content-center" style="width:55%; margin-top:70px;">

    <div class="container justify-content-center" style="width:80%">

        <form>
            <div class="texto" style="margin-top:50px;">
                <label for="name">Name: </label>
                <input type="name" class="form-control input-lg" id="exampleName" aria-describedby="NameHelp" placeholder="Enter the name of the Competition">
            </div>
            <br>
            <div class="texto">
                <label for="decription">Description: </label>
                <input type="decsription" class="form-control input-lg" id="exampleDescription" placeholder="Enter the description for the competition">
            </div>

        </form>

        <br>
        <br>

        <div class="dropdown">
            <button class="btn btn-secondary btn-lg dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                Competition Type
            </button>
            <div class="dropdown-menu col-xs-12" aria-labelledby="dropdownMenuButton">
                <a class="dropdown-item" href="#">Filme</a>
                <a class="dropdown-item" href="#">Ator</a>
                <a class="dropdown-item" href="#">Diretor</a>
            </div>
        </div>



        <br />
        <br />
        <br />

        <!--
            <p class="texto">Category</p>
        <br />

        <div class=" container check justify-content-center">
            <div class="col-sm-1"></div>
            <div class="col-sm-3">
                <div class="form-check">
                    <label class="form-check-label">
                        <input type="checkbox" class="form-check-input" value="">
                        <label for="cat" class="cat"> Action</label>
                    </label>
                </div>
                <br />
                <div class="form-check">
                    <label class="form-check-label">
                        <input type="checkbox" class="form-check-input" value="">
                        <label for="cat" class="cat"> Drama</label>
                    </label>
                </div>
                <br />
                <div class="form-check">
                    <label class="form-check-label">
                        <input type="checkbox" class="form-check-input" value="">
                        <label for="cat" class="cat"> Romance</label>
                    </label>
                </div>
                <br />
                <br />
                <br />
            </div>
            <div class="col-sm-3">
                <div class="form-check">
                    <label class="form-check-label">
                        <input type="checkbox" class="form-check-input" value="">
                        <label for="cat" class="cat"> Documnetary</label>
                    </label>
                </div>
                <br />
                <div class="form-check">
                    <label class="form-check-label">
                        <input type="checkbox" class="form-check-input" value="">
                        <label for="cat" class="cat"> Suspense</label>
                    </label>
                </div>
                <br />
                <div class="form-check">
                    <label class="form-check-label">
                        <input type="checkbox" class="form-check-input" value="">
                        <label for="cat" class="cat"> Terror</label>
                    </label>
                </div>
                <br />
                <br />
                <br />
            </div>
            <div class="col-sm-4">
                <div class="form-check">
                    <label class="form-check-label">
                        <input type="checkbox" class="form-check-input" value="">
                        <label for="cat" class="cat"> Science fiction</label>
                    </label>
                </div>
                <br />
                <div class="form-check" >
                    <label class="form-check-label">
                        <input type="checkbox" class="form-check-input" value="">
                        <label for="cat" class="cat"> acao</label>
                    </label>
                </div>
                <br />
                <div class="form-check">
                    <label class="form-check-label">
                        <input type="checkbox" class="form-check-input" value="">
                        <label for="cat" class="cat"> Adventure</label>
                    </label>
                </div>
                <br />
                <br />
                <br />
            </div

        </div>
        -->
        <!--Search Movie-->
        <div class="form-group row">
            <div class="col-xl-11">
                <input class="form-control" type="text" @bind-value="@search" @bind-value:event="oninput" @onkeyup="KeyHandler" placeholder="Search movie" />
            </div>
            <div class="col-xs-2">
                <input class="form-control" id="searchButton" type="submit" @onclick="GetPosters" value="Go" />
            </div>
        </div>


        <!------------------------------------------------->






        <div class="form-check form-switch switch">
            <input class="form-check-input" type="checkbox" role="switch" id="flexSwitchCheckDefault">
            <label class="cat2" for="flexSwitchCheckDefault">Public</label>
        </div>
        <br>
        <br />
        <br />

        <div class="col-sm-3"></div>
        <div class="col-sm-2">
            <button type="button" class="btn btn-light btn-lg">Cancel</button>
        </div>
        <div class="col-sm-2"></div>
        <div class="col-sm-1">
            <button type="button" class="btn btn-warning btn-lg">Next</button>
        </div>
        <br>
        <br />
        <br />

    </div>
    <br>
    <br />
</div>
<br>
<br />
<br />

@if(movieList!= null)
{
    @foreach (var i in @movieList.results)
    {
        <div class="poster">
            <div class="flip-card_i">
                <div class="flip-card-inner_i">
                    <div class="flip-card-front_i">
                        <img src="https://image.tmdb.org/t/p/w342/@i.poster_path" alt="Avatar" style="width:250px;height:360px;">
                        <div class="form-check form-check-inline">
                            <label class="form-check-label" for="inlineCheckbox1">1</label>
                            <div class="col-xs-2">
                                <input class="form-control" id="choose" type="submit" @bind-value="@i.id" @onclick="@(e => GetMovie(@i.id))" />
                            </div>
                        </div>
                    </div>

                </div>
                <div class="flim">
                    <b>@i.title</b><br>IMDb - 8.8
                </div>
            </div>
        </div>
    }
}




@code {

    private string search { get; set; }
    private string moviePath;
    private MovieList movieList;

    //== Movie Search ==//
    private async Task GetPosters()
    {

        movieList = await movieApi.searchMovieDetails(search);
    } // MovieSearch()


    private async Task KeyHandler(KeyboardEventArgs e)
    {
        if (e.Key == "Enter")
        {
            await GetPosters();
        }
    }

    public async Task GetMovie(int id)
    {
        
        await movieApi.GrabMovieAsync(id);
    } // GetMovie()
}   
